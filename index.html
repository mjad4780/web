<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>portfolio</title>
  <style>
    /* تنسيق الصفحة المبدئية */
    body {
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background-color: #F4F4EF; /* لون الخلفية */
      font-family: Arial, sans-serif;
      flex-direction: column;
    }

    #splash-screen {
      text-align: center;
      position: absolute;
      width: 100%;
      height: 100%;
      background-color: #F4F4EF;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      transition: opacity 0.5s ease-out; /* تأثير سلس عند الاختفاء */
    }

    /* صورة التحميل */
    #loading-image {
      width: 150px; /* حجم الصورة */
      height: auto;
    }

    /* شريط التقدم */
    #progress-container {
      margin-top: 15px;
      display: flex;
      align-items: center;
      flex-direction: column;
    }

    #progress-bar {
      width: 250px;
      height: 10px;
      background-color: #f3f3f3;
      border-radius: 5px;
      overflow: hidden;
      border: 1px solid #ccc;
    }

    #progress-bar-fill {
      height: 100%;
      width: 0;
      background: linear-gradient(to right, #ff4e50, #1c92d2);
      transition: width 0.3s ease;
    }

    /* نسبة التحميل */
    #progress-text {
      margin-top: 5px;
      font-size: 1rem;
      color: #2c3e50;
    }

    /* إخفاء سلس عند تحميل التطبيق */
    .hidden {
      opacity: 0;
      pointer-events: none;
    }
  </style>
</head>
<body>

  <!-- شاشة التحميل -->
  <div id="splash-screen">
    <img id="loading-image" src="assets/images/image.png" alt="Loading...">
    <div id="progress-container">
      <div id="progress-bar">
        <div id="progress-bar-fill"></div>
      </div>
      <div id="progress-text">0%</div>
    </div>
  </div>

  <!-- تحميل `flutter.js` مسبقًا -->
  <script>
    const flutterScript = document.createElement("script");
    flutterScript.src = "flutter.js";
    flutterScript.async = true;
    document.head.appendChild(flutterScript);
  </script>

  <script>
    let progress = 0;
    const progressBar = document.getElementById("progress-bar-fill");
    const progressText = document.getElementById("progress-text");

    // محاكاة تحميل سريع مع تحديث النسبة
    function simulateFastLoading() {
      return new Promise((resolve) => {
        const interval = setInterval(() => {
          if (progress < 100) {
            progress += Math.floor(Math.random() * 8);
            if (progress > 100) progress = 100;
            progressBar.style.width = progress + "%";
            progressText.innerText = progress + "%";
          } else {
            clearInterval(interval);
            resolve();
          }
        }, 200); // تحميل أسرع
      });
    }

    // بدء التحميل
    simulateFastLoading().then(() => {
      console.log("Loading Flutter...");
      _flutter.loader.loadEntrypoint({
        serviceWorker: {
          serviceWorkerVersion: "1"
        }
      }).then(function(engineInitializer) {
        console.log("Flutter Initialized");
        return engineInitializer.initializeEngine();
      }).then(function(appRunner) {
        console.log("Flutter App Running");

        // تأثير اختفاء سلس لشاشة التحميل
        const splashScreen = document.getElementById("splash-screen");
        splashScreen.classList.add("hidden");

        setTimeout(() => {
          splashScreen.style.display = "none"; // إخفاء كلي بعد التأثير
        }, 500);

        appRunner.runApp();
      }).catch(function(error) {
        console.error("Flutter failed to load", error);
      });
    });
  </script>

</body>
</html>
